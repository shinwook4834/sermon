<!-- 언어 아이콘 선택 버전 -->
<style>
.lang-icons {
  display: flex;
  gap: 15px;
  margin: 10px 0;
}

.lang-icon {
  font-size: 2rem;
  cursor: pointer;
  transition: transform 0.2s ease;
}

.lang-icon:hover {
  transform: scale(1.2);
}
</style>

<div class="lang-icons" role="list" aria-label="Select Language">
  <span
    role="listitem"
    class="lang-icon"
    onclick="switchLang('ko')"
    title="한국어"
    tabindex="0"
    aria-current="{{ site.active_lang == 'ko' }}"
    onkeydown="if(event.key==='Enter' || event.key===' ') switchLang('ko')"
  >
    🇰🇷
  </span>

  <span
    role="listitem"
    class="lang-icon"
    onclick="switchLang('en')"
    title="English"
    tabindex="0"
    aria-current="{{ site.active_lang == 'en' }}"
    onkeydown="if(event.key==='Enter' || event.key===' ') switchLang('en')"
  >
    🇺🇸
  </span>
</div>

<script>
  function switchLang(targetLang) {
    const base = "{{ site.baseurl }}"; // "/sermon"
    const path = window.location.pathname;

    // baseurl 제거한 상대 경로
    const relativePath = path.startsWith(base) ? path.slice(base.length) : path;

    // 언어 접두어 제거
    const cleanPath = relativePath.replace(/^\/en/, "");

    let newPath = base;
    if (targetLang === "en") {
      newPath += "/en" + cleanPath;
    } else {
      newPath += cleanPath;
    }

    // 항상 끝에 "/" 붙이기
    if (!newPath.endsWith("/")) newPath += "/";

    window.location.href = newPath;
  }
</script>