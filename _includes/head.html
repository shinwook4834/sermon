<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta property="og:image" content="./assets/img/avatar.png" />
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  >

  <meta http-equiv="Content-Language" content="{{site.active_lang}}">

  {% if site.default_lang -%}
  <link rel="alternate" hreflang="{{site.default_lang}}" href="{{site.url}}{{page.url}}" />
  {%- endif -%}
  {% for lang in site.languages -%}
    {% if lang == site.default_lang -%}
      {%- continue -%}
    {%- endif %}
  <link rel="alternate" hreflang="{{lang}}" href="{{site.url}}/{{lang}}{{page.url}}" />
  {%- endfor %}

  {%- if page.image -%}
    {%- assign base = page.image | split: '.' | first -%}
    {%- assign ext  = page.image | split: '.' | last  -%}
    {%- assign widths = "360,540,720,960,1200" | split: "," -%}
    {%- capture imagesrcset -%}
    {%- for ww in widths -%}
    {{ base }}-{{ ww | strip }}.{{ ext }} {{ ww | strip }}w{% if forloop.last == false %}, {% endif %}
    {%- endfor -%}
    {%- endcapture -%}
    <link rel="preload"
          as="image"
          href="{{ page.image }}"
          imagesrcset="{{ imagesrcset | strip }}"
          imagesizes="(max-width: 576px) 100vw, (max-width: 992px) 50vw, 388px"
          fetchpriority="high">
  {%- endif -%}



  {% capture seo_tags -%}
    {% seo title=false %}
  {%- endcapture %}

  <!-- 다국어 지원 - tagline 및 description 설정 -->
  {% if site.active_lang == 'ko' %}
    <meta name="description" content="매일이 집밥! 삼식이 남편 그리고 아이와 함께하는 일상 블로그 입니다.">
    <meta property="og:description" content="매일이 집밥! 삼식이 남편 그리고 아이와 함께하는 일상 블로그 입니다.">
    <meta name="twitter:description" content="매일이 집밥! 삼식이 남편 그리고 아이와 함께하는 일상 블로그 입니다.">
  {% else %}
    <meta name="description" content="Home-Cooked Everything! Life with a Baby and a Husband Who Never Eat Out">
    <meta property="og:description" content="Home-Cooked Everything! Life with a Baby and a Husband Who Never Eat Out">
    <meta name="twitter:description" content="Home-Cooked Everything! Life with a Baby and a Husband Who Never Eat Out">
  {% endif %}

  <!-- CDN Preconnect -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin="anonymous">

  <!-- Open Graph image 처리 -->
  {% if page.image -%}
    {% assign src = page.image.path | default: page.image %}
    {% unless src contains '://' -%}
      {% capture img_url %}{% include media-url.html src=src subpath=page.media_subpath absolute=true %}{% endcapture %}
      {% capture old_url %}{{ src | absolute_url }}{% endcapture %}
      {% capture new_url %}{{ img_url }}{% endcapture %}
      {% assign seo_tags = seo_tags | replace: old_url, new_url %}
    {% endunless %}
  {% elsif site.social_preview_image %}
    {% capture img_url %}{% include media-url.html src=site.social_preview_image absolute=true %}{% endcapture %}
    {% capture og_image %}<meta property="og:image" content="{{ img_url }}" />{% endcapture %}
    {% capture twitter_image %}
      <meta name="twitter:card" content="summary_large_image" />
      <meta property="twitter:image" content="{{ img_url }}" />
    {% endcapture %}
    {% assign old_meta_clip = '<meta name="twitter:card" content="summary" />' %}
    {% assign new_meta_clip = og_image | append: twitter_image %}
    {% assign seo_tags = seo_tags | replace: old_meta_clip, new_meta_clip %}
  {% endif %}

  {% capture old_og_locale %}<meta property="og:locale" content="{{site.lang}}" />{% endcapture %}
  {% capture new_og_locale %}
    <meta property="og:locale" content="{{site.active_lang}}" />
    {% for lang in site.languages %}
      {% if lang == site.active_lang %}{% continue %}{% endif %}
      <meta property="og:locale:alternate" content="{{lang}}" />
    {% endfor %}
  {% endcapture %}
  {% assign seo_tags = seo_tags | replace: old_og_locale, new_og_locale %}

  {% unless site.active_lang == site.default_lang %}
    {% capture old_canonical_link %}<link rel="canonical" href="{{site.url}}{{page.url}}" />{% endcapture %}
    {% capture old_og_url %}<meta property="og:url" content="{{site.url}}{{page.url}}" />{% endcapture %}
    {% capture new_canonical_link %}<link rel="canonical" href="{{site.url}}/{{site.active_lang}}{{page.url}}" />{% endcapture %}
    {% capture new_og_url %}<meta property="og:url" content="{{site.url}}/{{site.active_lang}}{{page.url}}" />{% endcapture %}
    {% assign seo_tags = seo_tags | replace: old_canonical_link, new_canonical_link %}
    {% assign seo_tags = seo_tags | replace: old_og_url, new_og_url %}
  {% endunless %}

  {{ seo_tags }}

  <title>
    {% unless page.layout == 'home' %}
      {{ page.title | append: ' | ' }}
    {% endunless %}
    {{ site.title }}
  </title>

  {% include_cached favicons.html %}

  <!-- Resource Hints -->
  {% unless site.assets.self_host.enabled %}
    {% for hint in site.data.origin.cors.resource_hints %}
      {% for link in hint.links %}
        <link rel="{{ link.rel }}" href="{{ hint.url }}" {{ link.opts | join: ' ' }}>
      {% endfor %}
    {% endfor %}
  {% endunless %}

  <!-- Bootstrap -->
  {% unless jekyll.environment == 'production' %}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css">
  {% endunless %}

  <!-- Theme style -->
  <link rel="stylesheet" href="{{ '/assets/css/:THEME.css' | replace: ':THEME', site.theme | relative_url }}">

  <!-- Web Font -->
  <link rel="stylesheet" href="{{ site.data.origin[type].webfonts | relative_url }}">
  <link rel="stylesheet" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable-dynamic-subset.min.css" />

  <!-- Font Awesome -->
  <link rel="stylesheet" href="{{ site.data.origin[type].fontawesome.css | relative_url }}">

  {% if site.toc and page.toc %}
    <link rel="stylesheet" href="{{ site.data.origin[type].toc.css | relative_url }}">
  {% endif %}

  {% if page.layout == 'post' or page.layout == 'page' or page.layout == 'home' %}
    <link rel="stylesheet" href="{{ site.data.origin[type]['lazy-polyfill'].css | relative_url }}">
  {% endif %}

  {% if page.layout == 'page' or page.layout == 'post' %}
    <link rel="stylesheet" href="{{ site.data.origin[type].glightbox.css | relative_url }}">
  {% endif %}

  <!-- Scripts -->
  <script src="{{ '/assets/js/dist/theme.min.js' | relative_url }}"></script>
  {% include js-selector.html lang=lang %}

  {% if jekyll.environment == 'production' %}
    {% if site.pwa.enabled %}
      <script defer src="{{ '/app.min.js' | relative_url }}?baseurl={{ site.baseurl | default: '' }}&register={{ site.pwa.cache.enabled }}"></script>
    {% endif %}
    {% for analytics in site.analytics %}
      {% capture str %}{{ analytics }}{% endcapture %}
      {% assign platform = str | split: '{' | first %}
      {% if site.analytics[platform].id and site.analytics[platform].id != empty %}
        {% include analytics/{{ platform }}.html %}
      {% endif %}
    {% endfor %}
  {% endif %}

  {% include metadata-hook.html %}

<!-- 
Google Analytics 
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FBSWTJ27CE"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-FBSWTJ27CE');
  </script>
-->

<!-- 
Google AdSense
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8691553075583022"
    crossorigin="anonymous"></script>
 -->

<!-- 
 Microsoft Clarity 
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "nbxyh17xog");
  </script>
-->  
</head>
